<div class="container mt-4">

    <div class="d-flex justify-content-between mb-3">

        <button class="btn btn-primary" (click)="openCreateModal()">
       Créer un étudiant
    </button>

        <button class="btn btn-dark" (click)="logout()">
       Déconnexion
    </button>
  </div>

    <table class="table table-striped">
    <thead>
      <tr>
        <th>Prénom</th>
        <th>Nom</th>
        <th>Email</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let s of students">
        <td>{{ s.firstName }}</td>
        <td>{{ s.lastName }}</td>
        <td>{{ s.email }}</td>

        <td class="text-end">

                    <button class="btn btn-sm btn-warning mx-1" (click)="openEditModal(s)">
            Modifier
          </button>

                    <button class="btn btn-sm btn-danger mx-1" (click)="delete(s.id!)">
            Supprimer
          </button>

        </td>
      </tr>
    </tbody>
  </table>


        <div class="modal fade" id="createModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title">Créer un étudiant</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <form [formGroup]="createForm" (ngSubmit)="submitCreate()">

          <div class="modal-body">

            <div class="mb-3">
              <label>Prénom</label>
              <input class="form-control" formControlName="firstName">
                            <div *ngIf="createForm.get('firstName')?.touched && createForm.get('firstName')?.invalid" class="text-danger small mt-1">
                Le prénom est requis.
              </div>
            </div>

            <div class="mb-3">
              <label>Nom</label>
              <input class="form-control" formControlName="lastName">
                            <div *ngIf="createForm.get('lastName')?.touched && createForm.get('lastName')?.invalid" class="text-danger small mt-1">
                Le nom est requis.
              </div>
            </div>

            <div class="mb-3">
              <label>Email</label>
              <input class="form-control" formControlName="email">
                            <div *ngIf="createForm.get('email')?.touched && createForm.get('email')?.invalid" class="text-danger small mt-1">
                <div *ngIf="createForm.get('email')?.errors?.['required']">L'adresse email est requise.</div>
                <div *ngIf="createForm.get('email')?.errors?.['email']">Veuillez entrer une adresse email valide.</div>
              </div>
            </div>

          </div>

          <div class="modal-footer">
            <button type="reset" class="btn btn-secondary">Effacer</button>
            <button type="submit" class="btn btn-primary" [disabled]="createForm.invalid">Valider</button>
            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Retour</button>
          </div>

        </form>

      </div>
    </div>
    </div>



    <div class="modal fade" id="editModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title">Modifier l’étudiant</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <form [formGroup]="editForm" (ngSubmit)="submitUpdate()">

          <div class="modal-body">

            <div class="mb-3">
              <label>Prénom</label>
              <input class="form-control" formControlName="firstName">
            </div>

            <div class="mb-3">
              <label>Nom</label>
              <input class="form-control" formControlName="lastName">
            </div>

            <div class="mb-3">
              <label>Email</label>
              <input class="form-control" formControlName="email">
            </div>

          </div>

          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Mettre à jour</button>
            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Retour</button>
          </div>

        </form>

      </div>
    </div>
  </div>

</div>